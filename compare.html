<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#0066FF">
    <title>Compare Banks - Bank Size | Interactive Banking Scale Comparison</title>
    <meta name="description" content="Compare the world's largest banks side by side. Discover what ICBC, JPMorgan, and other banking giants could do with their combined assets.">
    <meta name="keywords" content="bank comparison, ICBC vs JPMorgan, banking scale visualization, bank assets comparison">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üè¶</text></svg>">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Compare Banking Giants - Bank Size">
    <meta property="og:description" content="Interactive comparison tool: See what the world's largest banks could do with their assets.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.banksize.com/compare">
    <meta property="og:image" content="https://www.banksize.com/images/compare-og.jpg">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://www.banksize.com/compare">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

    <!-- Shared Styles -->
    <style>
        :root {
            --primary: #0066FF;
            --secondary: #FF6B35;
            --dark: #0A0E27;
            --darker: #050714;
            --light: #F7F8FA;
            --gray: #6B7280;
            --success: #10B981;
            --warning: #F59E0B;
            --error: #EF4444;
            --gradient-primary: linear-gradient(135deg, #0066FF 0%, #00D4FF 100%);
            --gradient-secondary: linear-gradient(135deg, #FF6B35 0%, #F7931E 100%);
            --gradient-success: linear-gradient(135deg, #10B981 0%, #34D399 100%);
            --gradient-dark: linear-gradient(180deg, #0A0E27 0%, #050714 100%);
            --font-display: 'Space Grotesk', -apple-system, BlinkMacSystemFont, sans-serif;
            --font-body: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
            font-size: 16px;
        }

        body {
            font-family: var(--font-body);
            color: var(--light);
            background: var(--darker);
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* Navigation */
        nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            padding: 1rem 0;
            background: rgba(10, 14, 39, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            transition: var(--transition);
        }

        nav.scrolled {
            padding: 0.75rem 0;
            background: rgba(5, 7, 20, 0.98);
            box-shadow: var(--shadow-lg);
        }

        .nav-container {
            max-width: 1280px;
            margin: 0 auto;
            padding: 0 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-family: var(--font-display);
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--light);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .logo-icon {
            width: 32px;
            height: 32px;
            background: var(--gradient-primary);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 2rem;
            align-items: center;
        }

        .nav-link {
            color: var(--light);
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition);
            position: relative;
        }

        .nav-link.active::after,
        .nav-link:hover::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 100%;
            height: 2px;
            background: var(--gradient-primary);
        }

        .menu-toggle {
            display: none;
            flex-direction: column;
            gap: 4px;
            cursor: pointer;
        }

        .menu-toggle span {
            width: 24px;
            height: 2px;
            background: var(--light);
            transition: var(--transition);
        }

        /* Page Hero */
        .page-hero {
            padding: 8rem 1.5rem 4rem;
            background: var(--gradient-dark);
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .page-hero::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 107, 53, 0.1) 0%, transparent 70%);
            animation: rotate-reverse 25s linear infinite;
        }

        @keyframes rotate-reverse {
            from { transform: rotate(360deg); }
            to { transform: rotate(0deg); }
        }

        .page-hero h1 {
            font-family: var(--font-display);
            font-size: clamp(2.5rem, 6vw, 4rem);
            font-weight: 700;
            margin-bottom: 1rem;
            position: relative;
            z-index: 1;
        }

        .gradient-text {
            background: linear-gradient(135deg, #0066FF 0%, #00D4FF 25%, #FF6B35 75%, #F7931E 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .page-subtitle {
            font-size: 1.25rem;
            color: var(--gray);
            max-width: 600px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        /* Compare Section */
        .compare-section {
            padding: 4rem 1.5rem;
            background: var(--dark);
            min-height: 80vh;
        }

        .compare-container {
            max-width: 1280px;
            margin: 0 auto;
        }

        /* Bank Selector */
        .bank-selector-wrapper {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .bank-selector {
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 1.5rem;
            position: relative;
        }

        .bank-selector.selected {
            border-color: var(--primary);
            box-shadow: 0 0 20px rgba(0, 102, 255, 0.2);
        }

        .bank-selector h3 {
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--gray);
            margin-bottom: 1rem;
        }

        .bank-dropdown {
            width: 100%;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: var(--light);
            padding: 1rem;
            border-radius: 12px;
            font-size: 1rem;
            cursor: pointer;
            transition: var(--transition);
        }

        .bank-dropdown:hover {
            border-color: var(--primary);
            background: rgba(255, 255, 255, 0.08);
        }

        .bank-dropdown:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(0, 102, 255, 0.1);
        }

        .selected-bank-info {
            margin-top: 1rem;
            padding: 1rem;
            background: rgba(0, 102, 255, 0.1);
            border-radius: 12px;
            display: none;
        }

        .bank-selector.selected .selected-bank-info {
            display: block;
        }

        .bank-info-stat {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
            font-size: 0.875rem;
        }

        .bank-info-stat:last-child {
            margin-bottom: 0;
        }

        .bank-info-label {
            color: var(--gray);
        }

        .bank-info-value {
            font-weight: 600;
            color: var(--primary);
        }

        /* Comparison Display */
        .comparison-display {
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 3rem;
            margin-bottom: 3rem;
            position: relative;
            overflow: hidden;
        }

        .comparison-display::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(0, 102, 255, 0.05) 0%, transparent 50%);
            animation: pulse 4s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 0.5; }
            50% { transform: scale(1.1); opacity: 0.3; }
        }

        .comparison-header {
            text-align: center;
            margin-bottom: 3rem;
            position: relative;
            z-index: 1;
        }

        .comparison-header h2 {
            font-family: var(--font-display);
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .comparison-header p {
            color: var(--gray);
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            position: relative;
            z-index: 1;
        }

        .comparison-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 1.5rem;
            text-align: center;
            transition: var(--transition);
        }

        .comparison-card:hover {
            transform: translateY(-4px);
            border-color: var(--secondary);
            box-shadow: 0 10px 30px rgba(255, 107, 53, 0.2);
        }

        .comparison-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            display: block;
        }

        .comparison-value {
            font-family: var(--font-display);
            font-size: 2.5rem;
            font-weight: 700;
            background: var(--gradient-secondary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
            display: block;
        }

        .comparison-label {
            font-size: 0.875rem;
            color: var(--gray);
            margin-bottom: 1rem;
        }

        .comparison-description {
            font-size: 0.875rem;
            line-height: 1.5;
            color: var(--light);
        }

        /* Action Buttons */
        .action-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 3rem;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border-radius: 2rem;
            font-weight: 600;
            text-decoration: none;
            transition: var(--transition);
            cursor: pointer;
            border: none;
            font-family: var(--font-body);
            font-size: 0.875rem;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-primary {
            background: var(--gradient-primary);
            color: white;
            box-shadow: 0 4px 15px rgba(0, 102, 255, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 102, 255, 0.4);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.05);
            color: var(--light);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.3);
        }

        /* Insights Section */
        .insights-section {
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 3rem;
        }

        .insights-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .insights-icon {
            width: 48px;
            height: 48px;
            background: var(--gradient-success);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .insights-header h3 {
            font-family: var(--font-display);
            font-size: 1.5rem;
        }

        .insight-item {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            margin-bottom: 1rem;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.02);
            border-radius: 12px;
            transition: var(--transition);
        }

        .insight-item:hover {
            background: rgba(255, 255, 255, 0.05);
            transform: translateX(4px);
        }

        .insight-item:last-child {
            margin-bottom: 0;
        }

        .insight-bullet {
            width: 24px;
            height: 24px;
            background: var(--gradient-primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            font-size: 0.75rem;
            font-weight: 700;
        }

        .insight-text {
            flex: 1;
            font-size: 0.875rem;
            line-height: 1.5;
        }

        /* Share Section */
        .share-section {
            text-align: center;
            padding: 2rem;
            background: rgba(255, 107, 53, 0.05);
            border: 1px solid rgba(255, 107, 53, 0.2);
            border-radius: 20px;
        }

        .share-section h3 {
            font-family: var(--font-display);
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }

        .share-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .share-btn {
            width: 48px;
            height: 48px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            text-decoration: none;
            color: var(--light);
        }

        .share-btn:hover {
            background: var(--gradient-primary);
            border-color: transparent;
            transform: translateY(-4px);
            box-shadow: 0 8px 20px rgba(0, 102, 255, 0.3);
        }

        /* Footer */
        footer {
            padding: 4rem 1.5rem 2rem;
            background: var(--darker);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .footer-container {
            max-width: 1280px;
            margin: 0 auto;
            text-align: center;
        }

        /* No Banks Selected State */
        .empty-state {
            text-align: center;
            padding: 4rem;
            color: var(--gray);
        }

        .empty-state-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
            opacity: 0.5;
        }

        .empty-state h3 {
            font-family: var(--font-display);
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            color: var(--light);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .nav-links {
                position: fixed;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100vh;
                background: var(--darker);
                flex-direction: column;
                justify-content: center;
                transition: left 0.3s ease;
            }

            .nav-links.active {
                left: 0;
            }

            .menu-toggle {
                display: flex;
                z-index: 1001;
            }

            .menu-toggle.active span:nth-child(1) {
                transform: rotate(45deg) translate(5px, 5px);
            }

            .menu-toggle.active span:nth-child(2) {
                opacity: 0;
            }

            .menu-toggle.active span:nth-child(3) {
                transform: rotate(-45deg) translate(7px, -6px);
            }

            .bank-selector-wrapper {
                grid-template-columns: 1fr;
            }

            .comparison-display {
                padding: 2rem;
            }

            .comparison-grid {
                grid-template-columns: 1fr;
            }

            .action-buttons {
                flex-direction: column;
            }

            .btn {
                width: 100%;
                justify-content: center;
            }
            .btn, .filter-btn, .category-btn {
                min-height: 48px;
                padding: 0.875rem 1.5rem;
            }
            /* Better spacing */
            .bank-card, .comparison-card {
                padding: 1.5rem;
            }
            /* Improved readability */
            body {
                font-size: 16px; /* Prevents zoom on iOS */
            }

            /* Mobile breadcrumb optimization */
            .breadcrumb-list {
                padding: 0 1rem;
                font-size: 0.8125rem;
            }

            /* Mobile chart optimizations */
            .chart-section {
                padding: 1.5rem 1rem;
            }

            .chart-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }

            .chart-controls {
                width: 100%;
                justify-content: space-between;
            }

            .chart-wrapper {
                padding: 1rem;
                max-height: 400px;
            }

            .btn-sm {
                padding: 0.625rem 1rem;
                font-size: 0.8125rem;
            }
        }

        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Chart Section */
        .chart-section {
            margin-top: 3rem;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 2rem;
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }

        .chart-header h3 {
            font-family: var(--font-display);
            font-size: 1.5rem;
            color: var(--light);
        }

        .chart-controls {
            display: flex;
            gap: 1rem;
        }

        .btn-sm {
            padding: 0.5rem 1rem;
            font-size: 0.875rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .chart-wrapper {
            background: rgba(10, 14, 39, 0.5);
            border-radius: 12px;
            padding: 2rem;
            max-height: 500px;
        }

        .saved-notice {
            margin-top: 1rem;
            padding: 0.75rem 1rem;
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid rgba(16, 185, 129, 0.3);
            border-radius: 8px;
            color: var(--success);
            text-align: center;
            font-size: 0.875rem;
        }

        /* Breadcrumb */
        .breadcrumb {
            background: rgba(10, 14, 39, 0.5);
            padding: 1rem 0;
            margin-top: 5rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        .breadcrumb-list {
            max-width: 1280px;
            margin: 0 auto;
            padding: 0 1.5rem;
            display: flex;
            gap: 0.5rem;
            list-style: none;
            align-items: center;
        }
        .breadcrumb-item {
            display: flex;
            align-items: center;
            color: var(--gray);
            font-size: 0.875rem;
        }
        .breadcrumb-item a {
            color: var(--gray);
            text-decoration: none;
            transition: color 0.3s;
        }
        .breadcrumb-item a:hover {
            color: var(--primary);
        }
        .breadcrumb-item:not(:last-child)::after {
            content: '‚Ä∫';
            margin-left: 0.5rem;
            color: rgba(255, 255, 255, 0.3);
        }
        .breadcrumb-item[aria-current="page"] {
            color: var(--light);
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav id="navbar">
        <div class="nav-container">
            <a href="index.html" class="logo">
                <div class="logo-icon">üí∞</div>
                <span>Bank Size</span>
            </a>
            <ul class="nav-links" id="navLinks">
                <li><a href="index.html" class="nav-link">Home</a></li>
                <li><a href="banks.html" class="nav-link">Banks</a></li>
                <li><a href="rankings.html" class="nav-link">Rankings</a></li>
                <li><a href="compare.html" class="nav-link active">Compare</a></li>
                <li><a href="statistics.html" class="nav-link">Statistics</a></li>
                <li><a href="research.html" class="nav-link">Research</a></li>
            </ul>
            <div class="menu-toggle" id="menuToggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <!-- Breadcrumb -->
    <nav class="breadcrumb" aria-label="Breadcrumb">
        <ol class="breadcrumb-list">
            <li class="breadcrumb-item"><a href="index.html">Home</a></li>
            <li class="breadcrumb-item" aria-current="page">Compare</li>
        </ol>
    </nav>

    <!-- Page Hero -->
    <section class="page-hero">
        <h1><span class="gradient-text">Compare Banking Giants</span></h1>
        <p class="page-subtitle">
            Select up to 3 banks to see their combined power and what they could achieve together.
        </p>
    </section>

    <!-- Compare Section -->
    <section class="compare-section">
        <div class="compare-container">
            <!-- Bank Selectors -->
            <div class="bank-selector-wrapper">
                <div class="bank-selector" id="selector1">
                    <h3>Select First Bank</h3>
                    <select class="bank-dropdown" id="bank1">
                        <option value="">Choose a bank...</option>
                    </select>
                    <div class="selected-bank-info" id="info1"></div>
                </div>
                
                <div class="bank-selector" id="selector2">
                    <h3>Select Second Bank</h3>
                    <select class="bank-dropdown" id="bank2">
                        <option value="">Choose a bank...</option>
                    </select>
                    <div class="selected-bank-info" id="info2"></div>
                </div>
                
                <div class="bank-selector" id="selector3">
                    <h3>Select Third Bank (Optional)</h3>
                    <select class="bank-dropdown" id="bank3">
                        <option value="">Choose a bank...</option>
                    </select>
                    <div class="selected-bank-info" id="info3"></div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="action-buttons">
                <button class="btn btn-primary" id="compareBtn">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                        <path d="M9 4H5C4.44772 4 4 4.44772 4 5V9M11 16H15C15.5523 16 16 15.5523 16 15V11M16 9V5C16 4.44772 15.5523 4 15 4H11M4 11V15C4 15.5523 4.44772 16 5 16H9" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    Compare Banks
                </button>
                <button class="btn btn-secondary" id="resetBtn">
                    Reset Selection
                </button>
            </div>

            <!-- Comparison Display -->
            <div class="comparison-display" id="comparisonDisplay" style="display: none;">
                <div class="comparison-header">
                    <h2 id="comparisonTitle">Combined Power</h2>
                    <p id="comparisonSubtitle">What these banks could achieve together</p>
                </div>
                
                <div class="comparison-grid" id="comparisonGrid">
                    <!-- Comparison cards will be inserted here -->
                </div>
            </div>

            <!-- Insights Section -->
            <div class="insights-section" id="insightsSection" style="display: none;">
                <div class="insights-header">
                    <div class="insights-icon">üí°</div>
                    <h3>Key Insights</h3>
                </div>
                <div id="insightsList">
                    <!-- Insights will be inserted here -->
                </div>
            </div>

            <!-- Share Section -->
            <div class="share-section" id="shareSection" style="display: none;">
                <h3>Share This Comparison</h3>
                <p style="color: var(--gray); margin-bottom: 1.5rem;">Spread awareness about the scale of global banking</p>
                <div class="share-buttons">
                    <a href="#" class="share-btn" id="shareTwitter" title="Share on Twitter">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M23 3a10.9 10.9 0 01-3.14 1.53 4.48 4.48 0 00-7.86 3v1A10.66 10.66 0 013 4s-4 9 5 13a11.64 11.64 0 01-7 2c9 5 20 0 20-11.5a4.5 4.5 0 00-.08-.83A7.72 7.72 0 0023 3z"/>
                        </svg>
                    </a>
                    <a href="#" class="share-btn" id="shareFacebook" title="Share on Facebook">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M18 2h-3a5 5 0 00-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 011-1h3z"/>
                        </svg>
                    </a>
                    <a href="#" class="share-btn" id="shareLinkedIn" title="Share on LinkedIn">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6zM2 9h4v12H2z"/>
                            <circle cx="4" cy="4" r="2"/>
                        </svg>
                    </a>
                    <a href="#" class="share-btn" id="shareEmail" title="Share via Email">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="2" y="4" width="20" height="16" rx="2"/>
                            <path d="M22 7l-10 5L2 7"/>
                        </svg>
                    </a>
                </div>
            </div>

            <!-- Empty State -->
            <div class="empty-state" id="emptyState">
                <div class="empty-state-icon">üè¶</div>
                <h3>Select Banks to Compare</h3>
                <p>Choose at least one bank from the dropdowns above to start comparing.</p>
            </div>

            <!-- Chart Visualization -->
            <div class="chart-section" id="chartSection" style="display: none;">
                <div class="chart-header">
                    <h3>Visual Comparison</h3>
                    <div class="chart-controls">
                        <button class="btn btn-secondary btn-sm" id="saveComparison" title="Save this comparison">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z"/>
                                <polyline points="17 21 17 13 7 13 7 21"/>
                                <polyline points="7 3 7 8 15 8"/>
                            </svg>
                            Save
                        </button>
                        <button class="btn btn-secondary btn-sm" id="exportChart" title="Export as image">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/>
                                <polyline points="7 10 12 15 17 10"/>
                                <line x1="12" y1="15" x2="12" y2="3"/>
                            </svg>
                            Export
                        </button>
                    </div>
                </div>
                <div class="chart-wrapper">
                    <canvas id="comparisonChart"></canvas>
                </div>
                <div class="saved-notice" id="savedNotice" style="display: none;">
                    ‚úì Comparison saved! It will be loaded automatically next time.
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="footer-container">
            <p>&copy; 2024 Bank Size. All data sourced from public financial reports.</p>
        </div>
    </footer>

    <!-- Load Bank Data -->
    <script src="banks-data.js"></script>
    
    <!-- Page Scripts -->
    <script>
        // Initialize when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            // Check if bankUtils is available
            if (typeof bankUtils === 'undefined' || typeof banksData === 'undefined') {
                console.error('Bank data not loaded. Please ensure banks-data.js is in the same directory.');
                document.getElementById('emptyState').innerHTML = '<div class="empty-state-icon">‚ö†Ô∏è</div><h3>Error Loading Bank Data</h3><p>Please refresh the page to try again.</p>';
                return;
            }
            
            // Use data from banks-data.js
            const banksDataArray = bankUtils.getAllBanks();

            // Populate dropdowns
            function populateDropdowns() {
                const dropdowns = ['bank1', 'bank2', 'bank3'];
                dropdowns.forEach(dropdownId => {
                    const select = document.getElementById(dropdownId);
                    banksDataArray.forEach(bank => {
                        const option = document.createElement('option');
                        option.value = bank.id;
                        option.textContent = `${bank.flag} ${bank.shortName} (${bankUtils.formatCurrency(bank.assets)})`;
                        select.appendChild(option);
                    });
                });
            }

            // Update bank info display
            function updateBankInfo(selectId, infoId, selectorId) {
                const select = document.getElementById(selectId);
                const infoDiv = document.getElementById(infoId);
                const selector = document.getElementById(selectorId);
                
                if (select.value) {
                    const bank = bankUtils.getBankById(select.value);
                    if (bank) {
                        selector.classList.add('selected');
                        infoDiv.innerHTML = `
                            <div class="bank-info-stat">
                                <span class="bank-info-label">Assets:</span>
                                <span class="bank-info-value">${bankUtils.formatCurrency(bank.assets)}</span>
                            </div>
                            <div class="bank-info-stat">
                                <span class="bank-info-label">Market Cap:</span>
                                <span class="bank-info-value">${bankUtils.formatCurrency(bank.marketCap)}</span>
                            </div>
                            <div class="bank-info-stat">
                                <span class="bank-info-label">Employees:</span>
                                <span class="bank-info-value">${bankUtils.formatNumber(bank.employees)}</span>
                            </div>
                        `;
                    }
                } else {
                    selector.classList.remove('selected');
                    infoDiv.innerHTML = '';
                }
            }

            // Get selected banks
            function getSelectedBanks() {
                const banks = [];
                ['bank1', 'bank2', 'bank3'].forEach(selectId => {
                    const value = document.getElementById(selectId).value;
                    if (value) {
                        const bank = bankUtils.getBankById(value);
                        if (bank) banks.push(bank);
                    }
                });
                return banks;
            }

            // Calculate comparisons
            function calculateComparisons(banks) {
                const totalAssets = banks.reduce((sum, bank) => sum + bank.assets, 0);
                const totalMarketCap = banks.reduce((sum, bank) => sum + bank.marketCap, 0);
                const totalEmployees = banks.reduce((sum, bank) => sum + bank.employees, 0);
                
                const comparisons = [
                    {
                        icon: 'üåç',
                        value: Math.floor(totalAssets / 45),
                        label: 'Years to End World Hunger',
                        description: `With ${bankUtils.formatCurrency(totalAssets)} in combined assets, these banks could fund the end of world hunger for ${Math.floor(totalAssets / 45)} years`
                    },
                    {
                        icon: 'üèà',
                        value: Math.floor(totalAssets / 208),
                        label: 'Times Buy All NFL Teams',
                        description: `Could purchase every NFL team ${Math.floor(totalAssets / 208)} times over`
                    },
                    {
                        icon: 'üì±',
                        value: Math.floor((totalAssets * 1000) / 800),
                        label: 'iPhones at Retail Price',
                        description: `Could buy ${(totalAssets * 1.25).toFixed(0)} million iPhones at $800 each`
                    },
                    {
                        icon: 'üè†',
                        value: Math.floor(totalAssets / 0.5),
                        label: 'Average US Homes',
                        description: `Could purchase ${bankUtils.formatNumber(totalAssets * 2000)} average American homes`
                    },
                    {
                        icon: 'üéì',
                        value: Math.floor(totalAssets / 0.05),
                        label: 'College Educations',
                        description: `Could fund ${bankUtils.formatNumber(totalAssets * 20000)} full college educations`
                    },
                    {
                        icon: 'üíä',
                        value: Math.floor(totalAssets / 100),
                        label: 'Years of Global Healthcare',
                        description: `Could fund basic healthcare for everyone on Earth for ${Math.floor(totalAssets / 100)} years`
                    }
                ];
                
                return comparisons.slice(0, 6);
            }

            // Generate insights
            function generateInsights(banks) {
                const totalAssets = banks.reduce((sum, bank) => sum + bank.assets, 0);
                const countries = [...new Set(banks.map(b => b.country))];
                const avgAge = Math.floor(banks.reduce((sum, bank) => sum + (2024 - bank.founded), 0) / banks.length);
                
                const insights = [];
                
                // Scale insight
                if (totalAssets > 10000) {
                    insights.push(`Combined assets exceed $10 trillion‚Äîmore than the GDP of every country except the US and China`);
                } else if (totalAssets > 5000) {
                    insights.push(`Combined assets of ${bankUtils.formatCurrency(totalAssets)} exceed the GDP of Japan, the world's 3rd largest economy`);
                }
                
                // Geographic insight
                if (countries.length > 1) {
                    insights.push(`Cross-continental alliance spanning ${countries.length} countries demonstrates global banking consolidation`);
                }
                
                // Market power insight
                if (banks.some(b => b.id === 'jpmorgan') && banks.some(b => b.id === 'bofa')) {
                    insights.push(`These US banks together control over 25% of all American deposits`);
                }
                
                // Historical insight
                insights.push(`Average age of ${avgAge} years‚Äîthese institutions have survived countless economic crises`);
                
                // Employment insight
                const totalEmployees = banks.reduce((sum, bank) => sum + bank.employees, 0);
                insights.push(`Combined workforce of ${bankUtils.formatNumber(totalEmployees)} people‚Äîlarger than many city populations`);
                
                return insights;
            }

            // Show comparison
            function showComparison() {
                const banks = getSelectedBanks();
                
                if (banks.length === 0) {
                    alert('Please select at least one bank to compare');
                    return;
                }
                
                // Hide empty state
                document.getElementById('emptyState').style.display = 'none';
                
                // Update comparison title
                const title = banks.map(b => b.shortName).join(' + ');
                document.getElementById('comparisonTitle').textContent = title;
                
                // Generate and display comparisons
                const comparisons = calculateComparisons(banks);
                const comparisonGrid = document.getElementById('comparisonGrid');
                comparisonGrid.innerHTML = comparisons.map(comp => `
                    <div class="comparison-card">
                        <span class="comparison-icon">${comp.icon}</span>
                        <span class="comparison-value">${comp.value}</span>
                        <p class="comparison-label">${comp.label}</p>
                        <p class="comparison-description">${comp.description}</p>
                    </div>
                `).join('');
                
                // Generate and display insights
                const insights = generateInsights(banks);
                const insightsList = document.getElementById('insightsList');
                insightsList.innerHTML = insights.map((insight, index) => `
                    <div class="insight-item">
                        <div class="insight-bullet">${index + 1}</div>
                        <div class="insight-text">${insight}</div>
                    </div>
                `).join('');
                
                // Show sections
                document.getElementById('comparisonDisplay').style.display = 'block';
                document.getElementById('insightsSection').style.display = 'block';
                document.getElementById('shareSection').style.display = 'block';
                
                // Scroll to results
                document.getElementById('comparisonDisplay').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }

            // Reset selection
            function resetSelection() {
                ['bank1', 'bank2', 'bank3'].forEach(selectId => {
                    document.getElementById(selectId).value = '';
                });
                
                ['info1', 'info2', 'info3'].forEach((infoId, index) => {
                    document.getElementById(infoId).innerHTML = '';
                    document.getElementById(`selector${index + 1}`).classList.remove('selected');
                });
                
                document.getElementById('comparisonDisplay').style.display = 'none';
                document.getElementById('insightsSection').style.display = 'none';
                document.getElementById('shareSection').style.display = 'none';
                document.getElementById('emptyState').style.display = 'block';
            }

            // Initialize
            populateDropdowns();
            
            // Bank select change handlers
            document.getElementById('bank1').addEventListener('change', () => updateBankInfo('bank1', 'info1', 'selector1'));
            document.getElementById('bank2').addEventListener('change', () => updateBankInfo('bank2', 'info2', 'selector2'));
            document.getElementById('bank3').addEventListener('change', () => updateBankInfo('bank3', 'info3', 'selector3'));
            
            // Button handlers
            document.getElementById('compareBtn').addEventListener('click', showComparison);
            document.getElementById('resetBtn').addEventListener('click', resetSelection);
            
            // Share handlers
            document.getElementById('shareTwitter').addEventListener('click', (e) => {
                e.preventDefault();
                const selectedBanks = getSelectedBanks();
                const totalAssets = selectedBanks.reduce((sum, b) => sum + b.assets, 0);
                const text = encodeURIComponent(`${selectedBanks.length} banks control ${bankUtils.formatCurrency(totalAssets)} in assets‚Äîenough to end world hunger for ${Math.floor(totalAssets / 45)} years:`);
                const shareUrl = encodeURIComponent('https://www.banksize.com/compare');
                window.open(`https://twitter.com/intent/tweet?text=${text}&url=${shareUrl}`, '_blank');
            });
            
            document.getElementById('shareFacebook').addEventListener('click', (e) => {
                e.preventDefault();
                const shareUrl = encodeURIComponent('https://www.banksize.com/compare');
                window.open(`https://www.facebook.com/sharer/sharer.php?u=${shareUrl}`, '_blank');
            });
            
            document.getElementById('shareLinkedIn').addEventListener('click', (e) => {
                e.preventDefault();
                const shareUrl = encodeURIComponent('https://www.banksize.com/compare');
                window.open(`https://www.linkedin.com/sharing/share-offsite/?url=${shareUrl}`, '_blank');
            });
            
            document.getElementById('shareEmail').addEventListener('click', (e) => {
                e.preventDefault();
                const selectedBanks = getSelectedBanks();
                const subject = encodeURIComponent('Mind-blowing Bank Comparison');
                const body = encodeURIComponent(`Check out this comparison of ${selectedBanks.length} major banks: https://www.banksize.com/compare`);
                window.location.href = `mailto:?subject=${subject}&body=${body}`;
            });
            
            // Mobile menu
            const menuToggle = document.getElementById('menuToggle');
            const navLinks = document.getElementById('navLinks');
            
            menuToggle.addEventListener('click', () => {
                menuToggle.classList.toggle('active');
                navLinks.classList.toggle('active');
            });
            
            // Scroll effect
            window.addEventListener('scroll', () => {
                const navbar = document.getElementById('navbar');
                if (window.pageYOffset > 100) {
                    navbar.classList.add('scrolled');
                } else {
                    navbar.classList.remove('scrolled');
                }
            });

            // Chart.js visualization
            let comparisonChart = null;

            function createComparisonChart(banks) {
                const ctx = document.getElementById('comparisonChart');
                if (!ctx) return;

                // Destroy existing chart
                if (comparisonChart) {
                    comparisonChart.destroy();
                }

                const chartData = {
                    labels: banks.map(b => b.shortName),
                    datasets: [{
                        label: 'Total Assets (Trillions USD)',
                        data: banks.map(b => (b.assets / 1000000000000).toFixed(2)),
                        backgroundColor: [
                            'rgba(0, 102, 255, 0.8)',
                            'rgba(255, 107, 53, 0.8)',
                            'rgba(0, 212, 255, 0.8)'
                        ],
                        borderColor: [
                            'rgba(0, 102, 255, 1)',
                            'rgba(255, 107, 53, 1)',
                            'rgba(0, 212, 255, 1)'
                        ],
                        borderWidth: 2
                    }]
                };

                comparisonChart = new Chart(ctx, {
                    type: 'bar',
                    data: chartData,
                    options: {
                        responsive: true,
                        maintainAspectRatio: true,
                        aspectRatio: window.innerWidth < 768 ? 1.2 : 2,
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                backgroundColor: 'rgba(10, 14, 39, 0.95)',
                                titleColor: '#F7F8FA',
                                bodyColor: '#F7F8FA',
                                borderColor: 'rgba(0, 102, 255, 0.5)',
                                borderWidth: 1,
                                padding: window.innerWidth < 768 ? 8 : 12,
                                displayColors: false,
                                bodyFont: {
                                    size: window.innerWidth < 768 ? 12 : 14
                                },
                                titleFont: {
                                    size: window.innerWidth < 768 ? 13 : 15
                                },
                                callbacks: {
                                    label: function(context) {
                                        return `$${context.parsed.y}T in assets`;
                                    }
                                }
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    color: '#6B7280',
                                    font: {
                                        size: window.innerWidth < 768 ? 11 : 12
                                    },
                                    callback: function(value) {
                                        return '$' + value + 'T';
                                    }
                                },
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.05)'
                                }
                            },
                            x: {
                                ticks: {
                                    color: '#6B7280',
                                    font: {
                                        size: window.innerWidth < 768 ? 11 : 12
                                    }
                                },
                                grid: {
                                    display: false
                                }
                            }
                        }
                    }
                });

                // Show chart section
                document.getElementById('chartSection').style.display = 'block';
            }

            // Modify showComparison to include chart
            const originalShowComparison = showComparison;
            showComparison = function() {
                originalShowComparison();
                const banks = getSelectedBanks();
                if (banks.length > 0) {
                    createComparisonChart(banks);
                }
            };

            // localStorage save/load
            function saveComparison() {
                const selectedBanks = ['bank1', 'bank2', 'bank3'].map(id =>
                    document.getElementById(id).value
                ).filter(v => v);

                localStorage.setItem('savedComparison', JSON.stringify(selectedBanks));

                // Show save notice
                const notice = document.getElementById('savedNotice');
                notice.style.display = 'block';
                setTimeout(() => {
                    notice.style.display = 'none';
                }, 3000);
            }

            function loadSavedComparison() {
                const saved = localStorage.getItem('savedComparison');
                if (saved) {
                    try {
                        const bankIds = JSON.parse(saved);
                        bankIds.forEach((bankId, index) => {
                            if (index < 3) {
                                const selectId = `bank${index + 1}`;
                                document.getElementById(selectId).value = bankId;
                                updateBankInfo(selectId, `info${index + 1}`, `selector${index + 1}`);
                            }
                        });
                    } catch (e) {
                        console.error('Error loading saved comparison:', e);
                    }
                }
            }

            // Export chart as image
            function exportChart() {
                if (!comparisonChart) return;

                const url = comparisonChart.toBase64Image();
                const link = document.createElement('a');
                link.download = 'bank-comparison.png';
                link.href = url;
                link.click();
            }

            // Add event listeners for new features
            document.getElementById('saveComparison').addEventListener('click', saveComparison);
            document.getElementById('exportChart').addEventListener('click', exportChart);

            // Load saved comparison on page load
            loadSavedComparison();

            // Hide chart when reset
            const originalResetSelection = resetSelection;
            resetSelection = function() {
                originalResetSelection();
                document.getElementById('chartSection').style.display = 'none';
                if (comparisonChart) {
                    comparisonChart.destroy();
                    comparisonChart = null;
                }
            };
        });
    </script>
</body>
</html>
